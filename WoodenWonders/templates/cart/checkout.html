{% extends "common/base.html" %}
{% load static %}
{% load product_filters %}
{% block title %}Checkout | WoodenWonders{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="{% static 'css/cart/checkout.css' %}">
{% endblock %}
{% block content %}
    <h1 class="title">Checkout</h1>
    <div class="checkout">
        <div class="checkout-information">
            <h3>Checkout Information</h3>
            <form method="post" action="{% url 'checkout' %}" class="form">
                {% csrf_token %}
                {% for field in form %}
                    {% if field.errors %}{{ field.errors }}{% endif %}
                    {{ field }}
                {% endfor %}
                <button type="submit" class="button">Checkout</button>
            </form>
        </div>
        <div class="order-information-wrapper">
            <h3>Order Information</h3>
            <div class="order-information light-box">
                {% for product, quantity in cart_products.items %}
                    <p>
                        {{ product }} &times; <b>{{ quantity }}</b> for <b>${{ product.price|calculate_total_price:quantity }}
                    </b>
                </p>
            {% endfor %}
            <p>
                Total: <b>${{ total_price|floatformat:2 }}</b>
            </p>
        </div>
    </div>
</div>
{% endblock %}
